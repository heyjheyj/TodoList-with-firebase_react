(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{22:function(t,e,n){t.exports={items:"todoItem_items__2PZzu",item:"todoItem_item__17ZvD",contents:"todoItem_contents__O7uhh",buttons:"todoItem_buttons__1Sbvt",textInput:"todoItem_textInput__2mBP8",trash:"todoItem_trash__1Kp90",edit:"todoItem_edit__bA2n0"}},26:function(t,e,n){t.exports={login:"login_login__3Yz6K",loginbtn:"login_loginbtn__1YbGD",text:"login_text__loECo"}},28:function(t,e,n){t.exports={header:"todoheader_header__e_IZh",logout:"todoheader_logout__3ZYRs",day:"todoheader_day____xys"}},29:function(t,e,n){t.exports={todolist:"todolist_todolist__ruzAv",lists:"todolist_lists__1SrVC",listContainer:"todolist_listContainer__1pF-e",container:"todolist_container__3GaEz"}},35:function(t,e,n){t.exports={inputfield:"todocreate_inputfield__3JrYr",input:"todocreate_input__19Tnz",submit:"todocreate_submit__3fgNB"}},38:function(t,e,n){t.exports={app:"app_app__cewju",background:"app_background__3Ad_6"}},43:function(t,e,n){t.exports={container:"todoContainer_container__2H0Tx"}},50:function(t,e,n){},57:function(t,e,n){"use strict";n.r(e);var o=n(6),c=n.n(o),a=n(42),i=n.n(a),s=(n(50),n(38)),r=n.n(s),u=n(25),d=n(11),l=n(10),b=n(35),j=n.n(b),h=n(7),f=Object(o.memo)((function(t){var e=t.onCreateTodo,n=t.user,c=Object(o.useRef)(),a=Object(o.useRef)(),i=function(t){if(t.preventDefault(),""!==c.current.value){var o={id:Date.now(),text:c.current.value,done:!1,user:n};a.current.reset(),e(o)}};return Object(h.jsxs)("form",{className:j.a.inputfield,ref:a,onSubmit:i,children:[Object(h.jsx)("input",{autoFocus:!0,ref:c,placeholder:"Input Something..",className:j.a.input}),Object(h.jsx)("button",{onSubmit:i,className:j.a.submit,children:"+"})]})})),O=n(28),p=n.n(O),x=new Date,_=x.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),m=x.toLocaleDateString("ko-KR",{weekday:"long"}),v=Object(o.memo)((function(t){var e=t.onLogout;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("header",{className:p.a.header,children:[Object(h.jsx)("h2",{className:p.a.title,children:_}),Object(h.jsx)("button",{className:p.a.logout,onClick:function(){e()},children:"Logout"})]}),Object(h.jsx)("p",{className:p.a.day,children:m})]})})),g=n(29),k=n.n(g),y=n(22),N=n.n(y),C=n(39),T=n(33),S=function(t){var e=t.todo,n=t.deleteTodo,c=t.editTodo,a=t.onChecked,i=Object(o.useRef)(),s=Object(o.useState)(!1),r=Object(d.a)(s,2),u=r[0],l=r[1],b=Object(o.useState)(e.text),j=Object(d.a)(b,2),f=j[0],O=j[1],p=function(){if(l(!0),f){var t={id:e.id,text:f,user:e.user,done:e.done};c(t)}},x=function(){n(e)};return Object(h.jsx)("ul",{className:N.a.items,children:Object(h.jsxs)("li",{className:N.a.item,children:[Object(h.jsxs)("section",{className:N.a.contents,children:[Object(h.jsx)("input",{className:N.a.checkbox,type:"checkbox",checked:e.done,onChange:function(t){if(t.target){var n={id:e.id,text:e.text,user:e.user,done:!e.done};a(n)}}}),!0===u?Object(h.jsx)("input",{type:"text",onKeyPress:function(t){"Enter"===t.key&&(""===t.currentTarget.value?x():p(),l(!1))},onChange:function(t){t.preventDefault(),O(t.target.value)},defaultValue:e.text,className:N.a.textInput,onBlur:function(t){t.preventDefault(),""===t.currentTarget.value?x():p(),l(!1)},autoFocus:!0}):Object(h.jsx)("span",{ref:i,children:e.text})]}),Object(h.jsxs)("section",{className:N.a.buttons,children:[Object(h.jsx)("button",{onClick:p,children:Object(h.jsx)(C.a,{icon:T.a,className:N.a.edit})}),Object(h.jsx)("button",{onClick:x,children:Object(h.jsx)(C.a,{icon:T.b,className:N.a.trash})})]})]})})},I=function(t){var e=t.todos,n=t.deleteTodo,o=t.editTodo,c=t.onChecked;return Object(h.jsxs)("div",{className:k.a.container,children:[Object(h.jsx)("section",{className:k.a.todolist,children:Object(h.jsxs)("span",{className:k.a.lists,children:["\ud574\uc57c\ud560 \uc77c :",e.length>0?e.filter((function(t){return!1===t.done})).length:""," ","/ \ub05d\ub0b8 \uc77c :",e.length>0?e.filter((function(t){return!0===t.done})).length:""]})}),Object(h.jsx)("section",{className:k.a.listContainer,children:e.map((function(t){return Object(h.jsx)(S,{todo:t,deleteTodo:n,editTodo:o,onChecked:c},t.id)}))})]})},w=n(43),A=n.n(w),D=function(t){var e=t.authService,n=t.todoRepository,c=Object(o.useState)([]),a=Object(d.a)(c,2),i=a[0],s=a[1],r=Object(l.e)(),b=Object(l.f)(),j=Object(o.useState)(r&&r.state.id),O=Object(d.a)(j,2),p=O[0],x=O[1];Object(o.useEffect)((function(){if(p){var t=n.syncTodos(p,(function(t){var e=[];Object.keys(t).map((function(n){return e.push(t[n]),e})),s(e)}));return function(){return t()}}}),[p,n]),Object(o.useEffect)((function(){e.onAuthChange((function(t){t?x(t.uid):b("/")}))}),[e,p,b]);var _=Object(o.useCallback)((function(){e.logout(),p||b("/")}),[e,b,p]);return Object(h.jsxs)("div",{className:A.a.container,children:[Object(h.jsx)(v,{onLogout:_}),i&&Object(h.jsx)(I,{todos:i,deleteTodo:function(t){s((function(e){return e.filter((function(e){return e.id!==t.id}))})),n.removeTodo(p,t)},editTodo:function(t){s((function(e){return e.map((function(e){return e.id===t.id?Object(u.a)(Object(u.a)({},e),{},{text:t.text}):e}))})),n.saveTodo(p,t)},onChecked:function(t){s((function(e){return e.map((function(e){return e.id===t.id?Object(u.a)(Object(u.a)({},e),{},{done:t.done}):e}))})),n.saveTodo(p,t)}}),Object(h.jsx)(f,{user:p,onCreateTodo:function(t){s((function(e){var n=Object(u.a)({},e);return n[t.id]=t,n})),n.saveTodo(p,t)}})]})},R=n(26),E=n.n(R),P=function(t){var e=t.authService,n=Object(l.f)(),c=Object(o.useCallback)((function(t){n("/todolist",{state:{id:t}})}),[n]);Object(o.useEffect)((function(){e.onAuthChange((function(t){t&&c(t.uid)}))}),[e,c]);return Object(h.jsxs)("section",{className:E.a.login,children:[Object(h.jsx)("h1",{className:E.a.text,children:"Login"}),Object(h.jsx)("ul",{className:E.a.list,children:Object(h.jsx)("li",{className:E.a.item,children:Object(h.jsx)("button",{className:E.a.loginbtn,onClick:function(t){e.login(t.currentTarget.textContent).then((function(t){c(t.user.uid)}))},children:"Google"})})})]})},K=n(32);var L=function(t){var e=t.todoRepository,n=t.authService;return Object(h.jsx)("section",{className:r.a.background,children:Object(h.jsx)("div",{className:r.a.app,children:Object(h.jsx)(K.a,{children:Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{path:"/",element:Object(h.jsx)(P,{authService:n})}),Object(h.jsx)(l.a,{path:"/todolist",element:Object(h.jsx)(D,{authService:n,todoRepository:e})})]})})})})},z=n(44),B=n(21),F=Object(z.a)({apiKey:"AIzaSyCxFW2Z3nBxprFKIIkieeDJiXpxgiPvhGs",authDomain:"todolist-a0bd5.firebaseapp.com",databaseURL:"https://todolist-a0bd5-default-rtdb.asia-southeast1.firebasedatabase.app/",projectId:"todolist-a0bd5",storageBucket:"todolist-a0bd5.appspot.com"}),G=(Object(B.a)(F),n(4)),Z=n(5),J=n(36),Y=function(){function t(){Object(G.a)(this,t),this.firebaseAuth=Object(J.b)(),this.googleProvider=new J.a}return Object(Z.a)(t,[{key:"login",value:function(t){var e=this.getProvider(t);return Object(J.c)(this.firebaseAuth,e)}},{key:"logout",value:function(){this.firebaseAuth.signOut()}},{key:"onAuthChange",value:function(t){this.firebaseAuth.onAuthStateChanged((function(e){t(e)}))}},{key:"getProvider",value:function(t){switch(t){case"Google":return this.googleProvider;default:throw new Error("not supported provider: ".concat(t))}}}]),t}(),V=new(function(){function t(e){Object(G.a)(this,t),this.db=Object(B.a)(e)}return Object(Z.a)(t,[{key:"saveTodo",value:function(t,e){Object(B.f)(Object(B.d)(this.db,"".concat(t,"/todos/").concat(e.id)),e)}},{key:"removeTodo",value:function(t,e){Object(B.e)(Object(B.d)(this.db,"".concat(t,"/todos/").concat(e.id)))}},{key:"syncTodos",value:function(t,e){var n=Object(B.d)(this.db,"".concat(t,"/todos/"));return Object(B.c)(n,(function(t){var n=t.val();n&&e(n)})),function(){return Object(B.b)(n)}}}]),t}())(F),H=new Y(F);i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(L,{authService:H,todoRepository:V})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.eeb5cf4f.chunk.js.map